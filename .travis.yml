dist: trusty
sudo: required
language: c
addons:
  apt:
    packages:
    - pandoc
    - pandoc-citeproc
    - aspell
    - aspell-en
    - inkscape
    - texlive-latex-base
    - texlive-latex-extra
    - texlive-fonts-recommended
    - texlive-font-utils
    - texlive-fonts-extra
    - texlive-latex-recommended
    - fonts-lmodern
    - lmodern
    - python
before_install:
  - sudo pip install pandoc-fignos pandoc-tablenos
before_script:
  - cd images ; bash convert-images.sh
script:
- cd $TRAVIS_BUILD_DIR
- ls
- ERRORS=`cat D1.3-e-Infra-Sentinel-Report.md | aspell -d en_GB -p .aspell.en.pws
  -a -c  |grep -v \* |uniq|grep -v "International Ispell Version" | wc -l`
- echo "Found $ERRORS errors"
- >
    pandoc -S --filter pandoc-fignos --filter pandoc-tablenos --variable mainfont="Lato"
    --variable sansfont="Lato" --variable monofont="Roboto" --variable fontsize=12pt
    --variable version=1.17.2 --reference-odt="deliverable-template.ott" --number-sections
    --toc --from markdown+implicit_figures+table_captions+pipe_tables+footnotes+inline_notes
    D1.3-e-Infra-Sentinel-Report.md  -o D1.3-e-Infra-Sentinel-Report.odt

- >
    pandoc -S --filter pandoc-fignos --filter pandoc-tablenos --variable mainfont="Lato"
    --variable sansfont="Lato" --variable monofont="Roboto" --variable fontsize=12pt
    --variable version=1.17.2 --number-sections --toc --from markdown+implicit_figures+table_captions+pipe_tables+footnotes+inline_notes
    D1.3-e-Infra-Sentinel-Report.md -o D1.3-e-Infra-Sentinel-Report.pdf

after_success:
before_deploy:
deploy:
  skip_cleanup: true
  provider: releases
  api_key:
    secure: PZl1iMqshI2fLEDBVoKY0R1U7wRH5fX3rbJhWKZCE4/Nn3XzyrHyAj09Oqf9K+1DPXYrN25FYOoMRrPbLN0CRwlwGnT/DNzKehW9rN9JFhCODHOh9cjQ2qvjGAp/IDGlq8sY+DqwkjMm9HkdZtCRb6gOvhxzO4LjD2GR/8nwbSqB6uI4oyBEG26qrZaQilvmsgtuUFOc+X6R25Nl5woIV4PobqsN9XIkVuT/nvQB5dWuRqAknnCrUWrd8gKK28IvW852lkSDX7vRg/y/t9SFIKNLV6SDifWtPY1f44bCz9+xxKe/pRZOFZGHj8gNf4ddFmJh5GYMXKjcxaAM1TdiaWl8KnnoNb90SDOj9tyJl2vZC9xh67bWsPpmk8gyd1KlHqWU5GeMQln+hYXTJGZao+8F6ipjps46f8SO59SHx0BLgeO8ELu2IVNhT3usJHlXeNsrCEmiCuisq2qIR+rFajZ0kr6b2w9Ew6+3EoEZRdAjKXtWLiHgNxXXCi86AIw4MwvpltZYYLrQw2nFnm2O38u1LIkak/sj5bEXSZ0zOC9FGqOlUv55WIcLwRRHiuqjzvXXcbtpbFSEqCHtgUaeo+8FEE/yr56xLrky4b7ITvGBgTM7rZnAcnljg9brfuuU/eV9PTHCRG9tbxlklu7P9iEh6M6vik1ptoU65bCb5hA=
  file:
  - D1.3-e-Infra-Sentinel-Report.odt
  - D1.3-e-Infra-Sentinel-Report.pdf
  on:
    repo: sci-gaia/D1.3e-Infrastructure-Sentinel-report
    tags: true
notifications:
  slack:
    secure: IY/ZbjmD3X1TY9f6rVaqhe+mjb5u4yaZzuY4ZgoAkmJffwppZzTmEcCxaX1PznIGSXCaIf7iO/9fVvN/sGvHkh8b8qB85fqIz/AdzGphF2q7kpGTzpylqLvjBqD+RoMP3luFfhhP6utXyOaw83FsRMdQs3u6KmlMQ1SdSKh/n2ct09MSoeTBrpqcZbJpk27Smi8qQqUpNQStjoak/K0ziQZRPaIgI/nH+v23PkxQmdS9j8O6Oj2Zl7HXhXKIJ7vwv9ZfVziSAZu5bjgYCXhN3hWacx2NyoB9UDtP4WCuQnAasfjyE2FBGyPJU4bp5d6DzUp44F05XQEgwoZSFAY4yRsPE3vldoP5f+BlWk3TGsp8s0OyOCP6QiOTZI6CU/ghwTImll+5Jxcq1cGUf/g09XZiku36B2Y/NDbETrguGq0L2Xn+p2e5MC1rPE7zYmB1bnSJ7dDLGOOVLkZ4BS4xyX7nkJl07XILk50K4TCJh6Oh8fIKEvfrEw+OADqQuBSufv6la+60uCpOylY+u+2CfWbbdUQK3KRccTe0qjTZIODDgmFFhLlt4g/791ellvnVn64vVNJ2uz9Uy+hOgO0wXM30LO/pZiiyRRyfcpF63lYmikAKXQhmIcCWDI8YtGFTW7WjQZ2M9kZFeAW5wbbKgt/ezLyAKe3npM99PNzG8zc=
